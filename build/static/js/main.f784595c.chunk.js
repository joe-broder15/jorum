(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{146:function(e,t,c){},288:function(e,t,c){"use strict";c.r(t);var a=c(1),s=c.n(a),n=c(32),r=c.n(n),j=(c(146),c(6)),i=c(7),l=c(13),b=c(136),d=c.n(b).a.create({baseURL:"http://forum-joe-broder.herokuapp.com/api",timeout:1e4,headers:{Authorization:"JWT "+localStorage.getItem("access_token"),"Content-Type":"application/json",accept:"application/json"}});function h(e){var t=Object(a.useState)([]),c=Object(j.a)(t,2),s=c[0],n=c[1],r=Object(a.useState)(!1),i=Object(j.a)(r,2),l=i[0],b=i[1],h=Object(a.useState)(null),o=Object(j.a)(h,2),u=o[0],O=o[1];return Object(a.useEffect)((function(){d.get(e).then((function(e){n(e.data),b(!0)})).catch((function(e){O(e)}))}),[e]),{error:u,isLoaded:l,data:s}}var o=c(35),u=c(26),O=c(300),x=c(293),m=c(138),p=c(139),f=(c(63),c(0));function v(e){return Object(f.jsx)(i.b,{to:"/user/"+e.user,children:e.user})}var g=s.a.createContext();function S(e){var t=Object(l.g)(),c=t.topicId,n=t.threadId,r=s.a.useContext(g),b=r.authState,d=(r.setAuthState,r.userState),h=(r.setUserState,Object(a.useState)((function(){return JSON.parse(e.data.content)}))),u=Object(j.a)(h,2),S=u[0],y=u[1];return Object(f.jsxs)(O.a,{children:[Object(f.jsx)(O.a.Header,{children:Object(f.jsx)(O.a.Title,{children:Object(f.jsxs)(x.a,{children:[Object(f.jsx)(m.a,{className:"mr-auto",children:Object(f.jsxs)("i",{children:["Post by ",Object(f.jsx)(v,{user:e.data.user})," @"," ",e.data.created_date.slice(0,10)]})}),Object(f.jsx)(m.a,{sm:"auto",children:null!=d&&b&&(d.username==e.data.user||d.privilege>1)?Object(f.jsx)(i.b,{to:"/topic/"+c+"/thread/"+n+"/post/"+e.data.id+"/edit",children:Object(f.jsx)(p.a,{children:"Edit"})}):""})]})})}),Object(f.jsx)(O.a.Body,{children:Object(f.jsx)(o.Editor,{toolbarHidden:!0,initialContentState:S,onContentStateChange:y,readOnly:!0})})]})}var y=c(294),C=c(295);function k(){var e=Object(l.g)(),t=h("/topic/"+e.topicId+"/thread/"+e.threadId+"/post"),c=t.data,a=t.error,s=t.isLoaded;return null!==a?Object(f.jsxs)("div",{children:["Error: ",a.message]}):s?Object(f.jsx)(C.a,{children:Object(f.jsx)(x.a,{className:"justify-content-md-center",children:Object(f.jsx)(m.a,{children:c.map((function(e){return Object(f.jsx)(x.a,{className:"justify-content-center",children:Object(f.jsx)(m.a,{children:Object(f.jsx)(S,{data:e})})})}))})})}):Object(f.jsx)(y.a,{animation:"border",role:"status",children:Object(f.jsx)("span",{className:"sr-only"})})}var N=c(301);c(133);function I(e){return Object(f.jsx)(N.a.Item,{children:Object(f.jsxs)(i.b,{to:"/topic/"+e.data.id,style:{textDecoration:"none"},children:[Object(f.jsxs)("h4",{children:[e.data.name," ",e.data.nsfw?Object(f.jsx)("i",{children:"(NSFW)"}):""]}),Object(f.jsx)("h6",{style:{color:"gray"},children:Object(f.jsx)("i",{children:e.data.description})})]})})}function E(){var e=h("/topic"),t=e.data,c=e.error,a=e.isLoaded;return null!==c?Object(f.jsxs)("div",{children:["Error: ",c.message]}):a?Object(f.jsx)(C.a,{children:Object(f.jsx)(x.a,{children:Object(f.jsx)(m.a,{children:Object(f.jsx)(x.a,{className:"justify-content-md-center",children:Object(f.jsx)(m.a,{md:"8",children:Object(f.jsxs)(O.a,{children:[Object(f.jsx)(O.a.Header,{children:Object(f.jsx)(O.a.Title,{children:"Topics"})}),Object(f.jsxs)(O.a.Body,{children:[Object(f.jsx)(O.a.Text,{children:Object(f.jsx)("h5",{children:"Welcome to my forum! Log in or register to make threads and post in the following topics."})}),Object(f.jsx)(N.a,{children:t.map((function(e){return Object(f.jsx)(I,{data:e})}))})]})]})})})})})}):Object(f.jsx)(y.a,{animation:"border",role:"status",children:Object(f.jsx)("span",{className:"sr-only"})})}function w(e){var t=s.a.useContext(g),c=t.authState,a=(t.setAuthState,t.userState);return Object(f.jsx)(N.a.Item,{children:Object(f.jsx)(O.a.Title,{children:Object(f.jsxs)(x.a,{children:[Object(f.jsx)(m.a,{className:"mr-auto",children:Object(f.jsx)(i.b,{to:"/topic/"+e.data.topic+"/thread/"+e.data.id,style:{textDecoration:"none"},children:Object(f.jsxs)("h3",{children:[e.data.name," ",e.data.nsfw?"(NSFW)":""]})})}),Object(f.jsxs)(m.a,{md:"auto",children:[Object(f.jsx)(x.a,{children:Object(f.jsxs)("i",{children:["Created by ",Object(f.jsx)(v,{user:e.data.user})]})}),Object(f.jsx)(x.a,{children:Object(f.jsxs)("i",{children:["Created on ",e.data.created_date.slice(0,10)]})})]}),Object(f.jsxs)(m.a,{md:1,children:[" ",1==c&&null!=a&&(a.username==e.data.user||a.privilege>1)?Object(f.jsx)(i.b,{to:"/topic/"+e.data.topic+"/thread/"+e.data.id+"/edit",children:Object(f.jsx)(p.a,{children:"Edit"})}):""]})]})})})}function L(e){var t=h("/topic/"+e.topicId+"/thread"),c=t.data,a=t.error,s=t.isLoaded;return null!==a?Object(f.jsxs)("div",{children:["Error: ",a.message]}):s?Object(f.jsx)(N.a,{children:0==c.length?Object(f.jsx)("h4",{children:"There are no threads for this topic"}):c.map((function(e){return Object(f.jsx)(w,{data:e})}))}):Object(f.jsx)(y.a,{animation:"border",role:"status",children:Object(f.jsx)("span",{className:"sr-only"})})}function A(e){var t=Object(l.g)().topicId,c=h("/topic/"+t),a=c.data,n=c.error,r=c.isLoaded,j=s.a.useContext(g),b=j.authState,d=(j.setAuthState,j.userState);j.setUserState;return null!==n?Object(f.jsxs)("div",{children:["Error: ",n.message]}):r?Object(f.jsx)(C.a,{children:Object(f.jsx)(x.a,{children:Object(f.jsx)(m.a,{children:Object(f.jsx)(x.a,{className:"justify-content-md-center",children:Object(f.jsx)(m.a,{md:"10",children:Object(f.jsxs)(O.a,{children:[Object(f.jsx)(O.a.Header,{children:Object(f.jsxs)(x.a,{children:[Object(f.jsx)(m.a,{className:"mr-auto",children:Object(f.jsx)(O.a.Title,{children:a.name})}),Object(f.jsx)(m.a,{sm:"auto",children:b&&null!=d?Object(f.jsx)(i.b,{to:"/topic/"+t+"/thread/create",children:Object(f.jsx)(p.a,{children:"Create a Thread"})}):""})]})}),Object(f.jsx)(O.a.Body,{children:Object(f.jsx)(L,{topicId:t})})]})})})})})}):Object(f.jsx)(y.a,{animation:"border",role:"status",children:Object(f.jsx)("span",{className:"sr-only"})})}var T=c(299);function B(e){var t=Object(l.g)().topicId,c=Object(l.f)(),n=Object(a.useState)(""),r=Object(j.a)(n,2),i=r[0],b=r[1],h=Object(a.useState)(!1),v=Object(j.a)(h,2),S=v[0],y=v[1],k=Object(a.useState)(""),N=Object(j.a)(k,2),I=N[0],E=(N[1],Object(a.useState)((function(){return u.EditorState.createEmpty()}))),w=Object(j.a)(E,2),L=w[0],A=w[1],B=Object(a.useState)(!1),D=Object(j.a)(B,2),R=D[0],U=D[1],G=s.a.useContext(g),P=G.authState;G.setAuthState,G.userState,G.setUserState;return Object(a.useEffect)((function(){0==P&&c.push("/")})),Object(a.useEffect)((function(){console.log(Object(u.convertToRaw)(L.getCurrentContent()))}),[L]),Object(f.jsx)(C.a,{children:Object(f.jsx)(x.a,{children:Object(f.jsx)(m.a,{children:Object(f.jsx)(x.a,{className:"justify-content-md-center",children:Object(f.jsx)(m.a,{md:"8",children:Object(f.jsxs)(O.a,{children:[Object(f.jsx)(O.a.Header,{children:Object(f.jsx)(O.a.Title,{children:"Create Thread"})}),Object(f.jsx)(O.a.Body,{children:Object(f.jsxs)(T.a,{onSubmit:function(e){return e.preventDefault(),void(""!=i&&I!={}&&0!=R?d.post("/topic/"+t+"/thread",{postContent:Object(u.convertToRaw)(L.getCurrentContent()),threadName:i,threadNsfw:S}).then((function(e){200==e.status?alert("success"):alert("fail"),c.push("/topic/"+t)})).catch((function(e){alert(e)})):alert("please do not leave any fields blank"))},children:[Object(f.jsx)("h3",{children:"Thread"}),Object(f.jsxs)(T.a.Group,{children:[Object(f.jsx)(T.a.Label,{children:"Thread Name"}),Object(f.jsx)(T.a.Control,{value:i,onChange:function(e){return b(e.target.value)}})]}),Object(f.jsx)("br",{}),Object(f.jsx)(T.a.Check,{type:"checkbox",value:S,checked:S,onChange:function(e){return y(!S)},label:"NSFW"}),Object(f.jsx)("br",{}),Object(f.jsx)("h3",{children:"First Post"}),Object(f.jsxs)(T.a.Group,{children:[Object(f.jsx)(T.a.Label,{children:"Content"}),Object(f.jsx)("div",{style:{padding:"2px",minHeight:"400px"},children:Object(f.jsx)(o.Editor,{editorState:L,onEditorStateChange:A})})]}),Object(f.jsx)("br",{}),Object(f.jsx)(T.a.Check,{type:"checkbox",value:R,checked:R,onChange:function(e){return U(!R)},label:"Confirm"}),Object(f.jsx)("br",{}),Object(f.jsx)(p.a,{type:"submit",children:"Submit"})]})})]})})})})})})}function D(e){var t=Object(l.g)(),c=t.topicId,n=t.threadId,r=Object(l.f)(),i=Object(a.useState)(""),b=Object(j.a)(i,2),o=b[0],u=b[1],v=Object(a.useState)(!1),S=Object(j.a)(v,2),k=S[0],N=S[1],I=s.a.useContext(g),E=I.authState,w=(I.setAuthState,I.userState),L=h("/topic/"+c+"/thread/"+n),A=L.data,B=(L.error,L.isLoaded),D=Object(a.useRef)(1);Object(a.useEffect)((function(){return D.current=1,E&&null!=w||r.push("/"),function(){D.current=0}}));var R=function(){B&&D&&(A.user!=w.username&&w.privilege<=1&&r.push("/"),u(A.name))};Object(a.useEffect)((function(){R()}),[B]);return B?Object(f.jsx)(C.a,{children:Object(f.jsx)(x.a,{children:Object(f.jsx)(m.a,{children:Object(f.jsx)(x.a,{className:"justify-content-md-center",children:Object(f.jsxs)(m.a,{md:"8",children:[Object(f.jsx)("h1",{children:"Edit Thread"}),Object(f.jsx)(O.a,{children:Object(f.jsxs)(O.a.Body,{children:[Object(f.jsxs)(T.a,{onSubmit:function(e){return e.preventDefault(),void(""!=o&&0!=k?d.put("/topic/"+c+"/thread/"+n,{name:o}).then((function(e){200==e.status?alert("success"):alert("fail"),r.push("/topic/"+c)})).catch((function(e){alert(e)})):alert("please do not leave any fields blank"))},children:[Object(f.jsxs)(T.a.Group,{children:[Object(f.jsx)(T.a.Label,{children:"Thread Name"}),Object(f.jsx)(T.a.Control,{value:o,onChange:function(e){return u(e.target.value)}})]}),Object(f.jsx)("br",{}),Object(f.jsx)(T.a.Check,{type:"checkbox",value:k,checked:k,onChange:function(e){return N(!k)},label:"Confirm"}),Object(f.jsx)("br",{}),Object(f.jsx)(p.a,{type:"submit",children:"Submit"})]}),Object(f.jsx)(p.a,{variant:"warning",onClick:R,children:"Reset"}),Object(f.jsx)(p.a,{variant:"danger",onClick:function(){d.delete("/topic/"+c+"/thread/"+n).then((function(e){200==e.status?alert("success"):alert("fail"),r.push("/topic/"+c)})).catch((function(e){alert(e)}))},children:"Delete"})]})})]})})})})}):Object(f.jsx)(y.a,{animation:"border",role:"status",children:Object(f.jsx)("span",{className:"sr-only"})})}function R(e){var t=Object(l.g)(),c=t.topicId,a=t.threadId,n=h("/topic/"+c+"/thread/"+a),r=n.data,j=n.error,b=n.isLoaded,d=s.a.useContext(g),o=d.authState,u=(d.setAuthState,d.userState);d.setUserState;return null!==j?Object(f.jsxs)("div",{children:["Error: ",j.message]}):b?Object(f.jsx)(C.a,{children:Object(f.jsx)(x.a,{children:Object(f.jsx)(m.a,{children:Object(f.jsx)(x.a,{className:"justify-content-md-center",children:Object(f.jsx)(m.a,{md:"10",children:Object(f.jsxs)(O.a,{children:[Object(f.jsx)(O.a.Header,{children:Object(f.jsx)(O.a.Title,{children:Object(f.jsxs)(x.a,{children:[Object(f.jsx)(m.a,{className:"mr-auto",children:r.name}),Object(f.jsx)(m.a,{sm:"auto",children:null!=u&&o?Object(f.jsx)(i.b,{to:"/topic/"+c+"/thread/"+a+"/post/create",children:Object(f.jsx)(p.a,{children:"Make a Post"})}):""})]})})}),Object(f.jsx)(O.a.Body,{children:Object(f.jsx)(k,{})})]})})})})})}):Object(f.jsx)(y.a,{animation:"border",role:"status",children:Object(f.jsx)("span",{className:"sr-only"})})}function U(e){var t=Object(l.g)(),c=t.topicId,n=t.threadId,r=Object(l.f)(),i=Object(a.useState)((function(){return u.EditorState.createEmpty()})),b=Object(j.a)(i,2),h=b[0],v=b[1],S=Object(a.useState)(!1),y=Object(j.a)(S,2),k=y[0],N=y[1],I=s.a.useContext(g),E=I.authState;I.setAuthState,I.userState,I.setUserState;return Object(a.useEffect)((function(){0==E&&r.push("/")})),Object(a.useEffect)((function(){console.log(Object(u.convertToRaw)(h.getCurrentContent()))}),[h]),Object(f.jsx)(C.a,{children:Object(f.jsx)(x.a,{children:Object(f.jsx)(m.a,{children:Object(f.jsx)(x.a,{className:"justify-content-md-center",children:Object(f.jsx)(m.a,{md:"8",children:Object(f.jsxs)(O.a,{children:[Object(f.jsx)(O.a.Header,{children:Object(f.jsx)(O.a.Title,{children:"Create a Post"})}),Object(f.jsx)(O.a.Body,{children:Object(f.jsxs)(T.a,{onSubmit:function(e){return e.preventDefault(),void(0!=k?d.post("/topic/"+c+"/thread/"+n+"/post",{content:Object(u.convertToRaw)(h.getCurrentContent())}).then((function(e){201==e.status?alert("success"):alert("fail"),r.push("/topic/"+c+"/thread/"+n)})).catch((function(e){alert(e)})):alert("please do not leave any fields blank"))},children:[Object(f.jsx)("div",{style:{padding:"2px",minHeight:"400px"},children:Object(f.jsx)(o.Editor,{editorState:h,onEditorStateChange:v})}),Object(f.jsx)(T.a.Check,{type:"checkbox",value:k,checked:k,onChange:function(e){return N(!k)},label:"Confirm"}),Object(f.jsx)("br",{}),Object(f.jsx)(p.a,{type:"submit",children:"Submit"})]})})]})})})})})})}function G(e){var t=Object(l.g)().postId,c=h("/post/"+String(t)),a=c.data,n=c.error,r=c.isLoaded,j=s.a.useContext(g),b=j.authState,d=(j.setAuthState,j.userState);return null!==n?Object(f.jsxs)("div",{children:["Error: ",n.message]}):r?Object(f.jsx)(C.a,{children:Object(f.jsx)(x.a,{children:Object(f.jsx)(m.a,{children:Object(f.jsx)(x.a,{className:"justify-content-md-center",children:Object(f.jsxs)(m.a,{md:"8",children:[Object(f.jsxs)("h1",{children:["Viewing Post ",a.id]}),Object(f.jsx)(O.a,{children:Object(f.jsx)(O.a.Body,{children:Object(f.jsxs)(N.a,{variant:"flush",children:[Object(f.jsx)(N.a.Item,{children:Object(f.jsxs)(x.a,{children:[Object(f.jsx)(m.a,{sm:"2",children:Object(f.jsx)("b",{children:"Title:"})}),Object(f.jsx)(m.a,{children:a.title})]})}),Object(f.jsx)(N.a.Item,{children:Object(f.jsxs)(x.a,{children:[Object(f.jsx)(m.a,{sm:"2",children:Object(f.jsx)("b",{children:"Description:"})}),Object(f.jsx)(m.a,{children:a.text})]})}),Object(f.jsx)(N.a.Item,{children:Object(f.jsxs)(x.a,{children:[Object(f.jsx)(m.a,{sm:"2",children:Object(f.jsx)("b",{children:"Created at:"})}),Object(f.jsx)(m.a,{children:a.created_date})]})}),Object(f.jsx)(N.a.Item,{children:Object(f.jsxs)(x.a,{children:[Object(f.jsx)(m.a,{sm:"2",children:Object(f.jsx)("b",{children:"Author:"})}),Object(f.jsx)(m.a,{children:Object(f.jsx)(v,{user:a.user})})]})})]})})}),Object(f.jsx)("br",{}),b&&null!=d&&(d.username==a.user||d.privilege>1)?Object(f.jsx)(x.a,{children:Object(f.jsx)(m.a,{sm:"2",children:Object(f.jsx)(i.b,{to:"/post/"+String(t)+"/edit",children:Object(f.jsx)(p.a,{children:"Edit"})})})}):""]})})})})}):Object(f.jsx)(y.a,{animation:"border",role:"status",children:Object(f.jsx)("span",{className:"sr-only"})})}function P(e){var t=Object(l.g)(),c=t.topicId,n=t.threadId,r=t.postId,i=Object(l.f)(),b=Object(a.useState)(!1),h=Object(j.a)(b,2),u=h[0],v=h[1],S=s.a.useContext(g),y=(S.authState,S.setAuthState,S.userState),k=Object(a.useState)((function(){return JSON.parse(e.data.content)})),N=Object(j.a)(k,2),I=N[0],E=N[1];Object(a.useEffect)((function(){(null==y||e.data.user!=y.username&&y.privilege<=1)&&i.push("/")}),[]);return Object(f.jsxs)(C.a,{children:[console.log(I),Object(f.jsx)(x.a,{children:Object(f.jsx)(m.a,{children:Object(f.jsx)(x.a,{className:"justify-content-md-center",children:Object(f.jsxs)(m.a,{md:"8",children:[Object(f.jsx)("h1",{children:"Edit Post"}),Object(f.jsx)(O.a,{children:Object(f.jsxs)(O.a.Body,{children:[Object(f.jsxs)(T.a,{onSubmit:function(e){return e.preventDefault(),void(0!=u?d.put("/topic/"+c+"/thread/"+n+"/post/"+r,{content:I}).then((function(e){201==e.status?alert("success"):alert("fail"),i.push("/topic/"+c+"/thread/"+n)})).catch((function(e){alert(e)})):alert("please do not leave any fields blank"))},children:[Object(f.jsx)(o.Editor,{initialContentState:I,onContentStateChange:E}),Object(f.jsx)(T.a.Check,{type:"checkbox",value:u,checked:u,onChange:function(e){return v(!u)},label:"Confirm"}),Object(f.jsx)("br",{}),Object(f.jsx)(p.a,{type:"submit",children:"Submit"})]}),Object(f.jsx)(p.a,{variant:"danger",onClick:function(){d.delete("/topic/"+c+"/thread/"+n+"/post/"+r).then((function(e){200==e.status?alert("success"):alert("fail"),i.push("/topic/"+c+"/thread/"+n)})).catch((function(e){alert(e)}))},children:"Delete"})]})})]})})})})]})}function F(e){var t=Object(l.g)(),c=h("/topic/"+t.topicId+"/thread/"+t.threadId+"/post/"+t.postId),a=c.data;c.error;return c.isLoaded?Object(f.jsx)(P,{data:a}):Object(f.jsx)(y.a,{animation:"border",role:"status",children:Object(f.jsx)("span",{className:"sr-only"})})}function H(){var e=Object(l.f)(),t=Object(a.useState)(""),c=Object(j.a)(t,2),n=c[0],r=c[1],b=Object(a.useState)(""),h=Object(j.a)(b,2),o=h[0],u=h[1],v=s.a.useContext(g),S=(v.authState,v.setAuthState);return Object(f.jsx)(C.a,{children:Object(f.jsx)(x.a,{children:Object(f.jsx)(m.a,{children:Object(f.jsx)(x.a,{className:"justify-content-md-center",children:Object(f.jsxs)(m.a,{md:"8",children:[Object(f.jsx)("h1",{children:"Login"}),Object(f.jsx)(O.a,{children:Object(f.jsx)(O.a.Body,{children:Object(f.jsxs)(T.a,{onSubmit:function(t){return t.preventDefault(),void(""!=n&&""!=o?d.post("/auth/token",{email:n,password:o}).then((function(t){202==t.status?(d.defaults.headers.Authorization="JWT "+t.data,localStorage.setItem("access_token",t.data),S(!0),e.push("/")):alert(t)})).catch((function(t){401==t.response.status?e.push("/verify/instructions"):alert(t)})):alert("please do not leave any fields blank"))},children:[Object(f.jsxs)(T.a.Group,{children:[Object(f.jsx)(T.a.Label,{children:"Email"}),Object(f.jsx)(T.a.Control,{type:"email",value:n,onChange:function(e){return r(e.target.value)}})]}),Object(f.jsx)("br",{}),Object(f.jsxs)(T.a.Group,{children:[Object(f.jsx)(T.a.Label,{children:"Password"}),Object(f.jsx)(T.a.Control,{type:"password",value:o,onChange:function(e){return u(e.target.value)}})]}),Object(f.jsx)("br",{}),Object(f.jsx)(i.b,{to:"/forgotpassword",children:"Forgot Password"}),Object(f.jsx)("br",{}),Object(f.jsx)(p.a,{type:"submit",children:"Submit"})]})})})]})})})})})}function _(e){var t=Object(l.f)(),c=Object(a.useState)(""),s=Object(j.a)(c,2),n=s[0],r=s[1],i=Object(a.useState)(""),b=Object(j.a)(i,2),h=b[0],o=b[1],u=Object(a.useState)(""),v=Object(j.a)(u,2),g=v[0],S=v[1],k=Object(a.useState)(""),N=Object(j.a)(k,2),I=N[0],E=N[1],w=Object(a.useState)(!1),L=Object(j.a)(w,2),A=L[0],B=L[1];return Object(f.jsx)(C.a,{children:Object(f.jsx)(x.a,{children:Object(f.jsx)(m.a,{children:Object(f.jsx)(x.a,{className:"justify-content-md-center",children:Object(f.jsxs)(m.a,{md:"8",children:[Object(f.jsx)("h1",{children:"Register"}),Object(f.jsx)(O.a,{children:Object(f.jsx)(O.a.Body,{children:Object(f.jsxs)(T.a,{onSubmit:function(e){return e.preventDefault(),void(""!=n&&""!=g&&g==I&&""!=h?(d.post("/auth/user",{username:h,email:n,password:g}).then((function(e){201==e.status?(alert("success"),t.push("/verify/instructions")):alert(e),B(!1)})).catch((function(e){alert(e),B(!1)})),B(!0)):alert("please do not leave any fields blank"))},children:[Object(f.jsxs)(T.a.Group,{children:[Object(f.jsx)(T.a.Label,{children:"Email"}),Object(f.jsx)(T.a.Control,{type:"email",value:n,onChange:function(e){return r(e.target.value)}})]}),Object(f.jsx)("br",{}),Object(f.jsxs)(T.a.Group,{children:[Object(f.jsx)(T.a.Label,{children:"Username"}),Object(f.jsx)(T.a.Control,{value:h,onChange:function(e){return o(e.target.value)}})]}),Object(f.jsx)("br",{}),Object(f.jsxs)(T.a.Group,{children:[Object(f.jsx)(T.a.Label,{children:"Password"}),Object(f.jsx)(T.a.Control,{type:"password",value:g,onChange:function(e){return S(e.target.value)}})]}),Object(f.jsx)("br",{}),Object(f.jsxs)(T.a.Group,{children:[Object(f.jsx)(T.a.Label,{children:"Confirm Password"}),Object(f.jsx)(T.a.Control,{type:"password",value:I,onChange:function(e){return E(e.target.value)}})]}),Object(f.jsx)("br",{}),A?Object(f.jsx)(y.a,{animation:"border",role:"status"}):Object(f.jsx)(p.a,{type:"submit",children:"Submit"})]})})})]})})})})})}function W(e){var t=Object(l.g)().userName,c=h("/user/"+String(t)),a=c.data,n=c.error,r=c.isLoaded,j=s.a.useContext(g),b=j.authState,d=(j.setAuthState,j.userState);return null!==n?Object(f.jsxs)("div",{children:["Error: ",n.message]}):r?Object(f.jsx)(C.a,{children:Object(f.jsx)(x.a,{className:"justify-content-md-center",children:Object(f.jsxs)(m.a,{md:"8",children:[Object(f.jsxs)(x.a,{children:[Object(f.jsx)(m.a,{md:"auto",children:Object(f.jsx)("img",{src:null==a.avatar?"/default_avatar.jpg":new URL(a.avatar),style:{width:"120px",height:"120px",padding:"0px"}})}),Object(f.jsxs)(m.a,{md:"auto",children:[Object(f.jsx)("h1",{children:a.username}),Object(f.jsx)("p",{children:a.name})]})]}),Object(f.jsxs)(O.a,{children:[Object(f.jsx)(O.a.Header,{children:Object(f.jsxs)(x.a,{className:"justify-content-between",children:[Object(f.jsx)(m.a,{xs:"auto",children:"Information"}),Object(f.jsx)(m.a,{xs:"auto",children:b&&null!=d&&(a.username==d.username||d.privilege>1)?Object(f.jsx)(i.b,{to:"/user/"+t+"/edit",children:Object(f.jsx)(p.a,{children:"Edit"})}):""})]})}),Object(f.jsx)(O.a.Body,{children:Object(f.jsxs)(N.a,{variant:"flush",children:[Object(f.jsx)(N.a.Item,{children:Object(f.jsxs)(x.a,{children:[Object(f.jsx)(m.a,{sm:"2",children:Object(f.jsx)("b",{children:"Username:"})}),Object(f.jsx)(m.a,{children:a.username})]})}),Object(f.jsx)(N.a.Item,{children:Object(f.jsxs)(x.a,{children:[Object(f.jsx)(m.a,{sm:"2",children:Object(f.jsx)("b",{children:"Name:"})}),Object(f.jsx)(m.a,{children:a.name})]})}),Object(f.jsx)(N.a.Item,{children:Object(f.jsxs)(x.a,{children:[Object(f.jsx)(m.a,{sm:"2",children:Object(f.jsx)("b",{children:"Bio:"})}),Object(f.jsx)(m.a,{children:a.bio})]})}),Object(f.jsx)(N.a.Item,{children:Object(f.jsxs)(x.a,{children:[Object(f.jsx)(m.a,{sm:"2",children:Object(f.jsx)("b",{children:"Birthday:"})}),Object(f.jsx)(m.a,{children:a.birthday})]})}),Object(f.jsx)(N.a.Item,{children:Object(f.jsxs)(x.a,{children:[Object(f.jsx)(m.a,{sm:"2",children:Object(f.jsx)("b",{children:"Gender:"})}),Object(f.jsx)(m.a,{children:a.gender})]})})]})})]}),Object(f.jsx)("br",{})]})})}):Object(f.jsx)(y.a,{animation:"border",role:"status",children:Object(f.jsx)("span",{className:"sr-only"})})}function J(e){var t=Object(l.g)().userName,c=Object(l.f)(),n=Object(a.useState)(""),r=Object(j.a)(n,2),i=(r[0],r[1]),b=Object(a.useState)(""),o=Object(j.a)(b,2),u=o[0],x=o[1],m=Object(a.useState)(""),v=Object(j.a)(m,2),S=v[0],C=v[1],k=Object(a.useState)(""),N=Object(j.a)(k,2),I=N[0],E=N[1],w=Object(a.useState)(""),L=Object(j.a)(w,2),A=L[0],B=L[1],D=Object(a.useState)(!1),R=Object(j.a)(D,2),U=R[0],G=R[1],P=Object(a.useState)(!1),F=Object(j.a)(P,2),H=F[0],_=F[1],W=s.a.useContext(g),J=(W.authState,W.setAuthState),q=(W.userState,W.setUserState),V=h("/user/"+String(t)),z=V.data,M=(V.error,V.isLoaded),Y=Object(a.useRef)(1);Object(a.useEffect)((function(){return Y.current=1,function(){Y.current=0}}));var K=function(){M&&Y&&(i(z.avatar),x(z.bio),C(z.birthday),E(z.gender),B(z.name),G(z.private))};Object(a.useEffect)((function(){K()}),[M]);return M?Object(f.jsxs)(O.a,{children:[Object(f.jsx)(O.a.Header,{children:Object(f.jsx)("h2",{children:"Edit Profile"})}),Object(f.jsxs)(O.a.Body,{children:[Object(f.jsxs)(T.a,{onSubmit:function(e){return e.preventDefault(),void(""!=u&&""!=A&&0!=H?d.put("/user/"+t,{username:t,name:A,bio:u,gender:I,private:U,birthday:String(S)}).then((function(e){200==e.status?alert("success"):alert("fail"),c.push("/user/"+z.username)})).catch((function(e){alert(e)})):alert("please do not leave any fields blank"))},children:[Object(f.jsxs)(T.a.Group,{children:[Object(f.jsx)(T.a.Label,{children:"Name"}),Object(f.jsx)(T.a.Control,{value:A,onChange:function(e){return B(e.target.value)}})]}),Object(f.jsx)("br",{}),Object(f.jsxs)(T.a.Group,{children:[Object(f.jsx)(T.a.Label,{children:"Bio"}),Object(f.jsx)(T.a.Control,{as:"textarea",rows:"9",value:u,onChange:function(e){return x(e.target.value)}})]}),Object(f.jsx)("br",{}),Object(f.jsxs)(T.a.Group,{children:[Object(f.jsx)(T.a.Label,{children:"Gender"}),Object(f.jsx)(T.a.Control,{value:I,onChange:function(e){return E(e.target.value)}})]}),Object(f.jsx)("br",{}),Object(f.jsx)(T.a.Group,{children:Object(f.jsx)(T.a.Check,{type:"checkbox",value:U,checked:U,onChange:function(e){return G(!U)},label:"Private"})}),Object(f.jsx)("br",{}),Object(f.jsxs)(T.a.Group,{children:[Object(f.jsx)(T.a.Label,{children:"Birthday"}),Object(f.jsx)(T.a.Control,{type:"date",placeholder:"Date of Birth",value:S,onChange:function(e){return C(e.target.value)}})]}),Object(f.jsx)("br",{}),Object(f.jsx)(T.a.Check,{type:"checkbox",value:H,checked:H,onChange:function(e){return _(!H)},label:"Confirm"}),Object(f.jsx)("br",{}),Object(f.jsx)(p.a,{type:"submit",children:"Submit"})]}),Object(f.jsx)(p.a,{variant:"warning",onClick:K,children:"Clear Changes"}),Object(f.jsx)("br",{}),Object(f.jsx)(p.a,{variant:"danger",onClick:function(){d.delete("/user/"+t).then((function(e){200==e.status?(localStorage.removeItem("access_token"),J(!1),q(null),alert("account deleted"),c.push("/")):alert("fail")})).catch((function(e){alert(e)}))},children:"Delete Account"})]})]}):Object(f.jsx)(y.a,{animation:"border",role:"status",children:Object(f.jsx)("span",{className:"sr-only"})})}var q=c(296);function V(e){var t=Object(l.g)().userName,c=Object(l.f)(),s=Object(a.useState)(""),n=Object(j.a)(s,2),r=n[0],i=n[1],b=Object(a.useState)(""),o=Object(j.a)(b,2),u=o[0],x=o[1],m=h("/user/"+String(t)),v=m.data,g=(m.error,m.isLoaded),S=Object(a.useRef)(1);Object(a.useEffect)((function(){return S.current=1,function(){S.current=0}}));Object(a.useEffect)((function(){g&&S&&i(v.avatar)}),[g]);return g?Object(f.jsxs)(O.a,{children:[Object(f.jsx)(O.a.Header,{children:Object(f.jsx)("h2",{children:"Edit Avatar"})}),Object(f.jsx)(O.a.Body,{children:Object(f.jsxs)(T.a,{onSubmit:function(e){return e.preventDefault(),void(""!=r?function(){var e=new FormData;e.append("file",r),e.append("filename",r.name),d.post("/upload/avatar/"+t,e).then((function(e){200==e.status?alert("success"):alert("fail"),c.push("/user/"+v.username)})).catch((function(e){alert(e)}))}():alert("please do not leave any fields blank"))},children:[Object(f.jsx)(T.a,{children:Object(f.jsx)(T.a.File,{id:"custom-file",label:"Upload a new avatar",custom:!0,onChange:function(e){i(e.target.files[0]),x(URL.createObjectURL(e.target.files[0]))}})}),Object(f.jsx)(q.a,{src:u,style:{width:"120px",height:"120px",padding:"0px"}}),Object(f.jsx)("br",{}),Object(f.jsx)(p.a,{type:"submit",children:"Submit"})]})})]}):Object(f.jsx)(y.a,{animation:"border",role:"status",children:Object(f.jsx)("span",{className:"sr-only"})})}function z(e){var t=Object(l.g)().userName,c=(Object(l.f)(),h("/auth/user/"+t)),a=c.data;c.error;return c.isLoaded?Object(f.jsxs)(O.a,{children:[Object(f.jsx)(O.a.Header,{children:Object(f.jsx)("h2",{children:"Edit Credentials"})}),Object(f.jsxs)(O.a.Body,{children:[Object(f.jsxs)(N.a,{variant:"flush",children:[Object(f.jsx)(N.a.Item,{children:Object(f.jsxs)(x.a,{children:[Object(f.jsx)(m.a,{sm:"3",children:Object(f.jsx)("b",{children:"Username:"})}),Object(f.jsx)(m.a,{children:a.username})]})}),Object(f.jsx)(N.a.Item,{children:Object(f.jsxs)(x.a,{children:[Object(f.jsx)(m.a,{sm:"3",children:Object(f.jsx)("b",{children:"Email:"})}),Object(f.jsx)(m.a,{children:a.email})]})}),Object(f.jsx)(N.a.Item,{children:Object(f.jsxs)(x.a,{children:[Object(f.jsx)(m.a,{sm:"3",children:Object(f.jsx)("b",{children:"Privilege:"})}),Object(f.jsx)(m.a,{children:+a.privilege})]})})]}),Object(f.jsx)(i.b,{to:"/forgotpassword",children:"Reset Password"})]})]}):Object(f.jsx)(y.a,{animation:"border",role:"status",children:Object(f.jsx)("span",{className:"sr-only"})})}function M(e){var t=Object(l.g)().userName,c=Object(l.f)(),n=Object(a.useState)(!1),r=Object(j.a)(n,2),i=r[0],b=r[1],o=s.a.useContext(g),u=(o.authState,o.setAuthState,o.userState,o.setUserState,h("/auth/user/"+t)),x=u.data,m=(u.error,u.isLoaded),v=Object(a.useRef)(1);Object(a.useEffect)((function(){return v.current=1,function(){v.current=0}}));var S=function(){m&&v&&b(x.privilege>1)};Object(a.useEffect)((function(){S()}),[m]);return m?Object(f.jsxs)(O.a,{children:[Object(f.jsx)(O.a.Header,{children:Object(f.jsx)("h2",{children:"Edit Profile"})}),Object(f.jsxs)(O.a.Body,{children:[Object(f.jsxs)(T.a,{onSubmit:function(e){return e.preventDefault(),void d.put("auth/user/privilege/"+t,{privilege:i?2:1}).then((function(e){200==e.status?alert("success"):alert("fail"),c.push("/user/"+x.username)})).catch((function(e){alert(e)}))},children:[Object(f.jsx)(T.a.Check,{type:"checkbox",value:i,checked:i,onChange:function(e){return b(!i)},label:"Administrator"}),Object(f.jsx)("br",{}),Object(f.jsx)(p.a,{type:"submit",children:"Submit"})]}),Object(f.jsx)(p.a,{variant:"warning",onClick:S,children:"Clear Changes"})]})]}):Object(f.jsx)(y.a,{animation:"border",role:"status",children:Object(f.jsx)("span",{className:"sr-only"})})}var Y=c(302);function K(e){var t=Object(l.g)().userName,c=Object(l.f)(),n=s.a.useContext(g),r=n.authState,i=n.userState,b=Object(a.useState)(1),d=Object(j.a)(b,2),h=d[0],o=d[1];return Object(a.useEffect)((function(){(!r||null==i||t!=i.username&&i.privilege<=1)&&c.push("/")})),Object(f.jsx)(C.a,{children:Object(f.jsx)(x.a,{children:Object(f.jsx)(m.a,{children:Object(f.jsx)(x.a,{className:"justify-content-md-center",children:Object(f.jsx)(m.a,{md:"8",children:Object(f.jsxs)(x.a,{children:[Object(f.jsx)(m.a,{md:"2",children:Object(f.jsxs)(Y.a,{defaultActiveKey:"/home",className:"flex-column",children:[Object(f.jsx)(Y.a.Link,{onClick:function(){return o(1)},children:"Profile"}),Object(f.jsx)(Y.a.Link,{onClick:function(){return o(2)},children:"Credentials"}),Object(f.jsx)(Y.a.Link,{onClick:function(){return o(3)},children:"Avatar"}),null!=i&&i.privilege>1?Object(f.jsx)(Y.a.Link,{onClick:function(){return o(4)},children:"Admin"}):""]})}),Object(f.jsx)(m.a,{children:function(e){switch(h){case 1:return Object(f.jsx)(J,{});case 2:return Object(f.jsx)(z,{});case 3:return Object(f.jsx)(V,{});case 4:return Object(f.jsx)(M,{})}}()})]})})})})})})}var Q=c(298),X=c(297);function Z(){var e=Object(l.f)(),t=s.a.useContext(g),c=(t.authState,t.setAuthState),a=(t.userState,t.setUserState);return Object(f.jsx)(X.a.Item,{onClick:function(t){d.delete("/auth/token").then((function(t){200==t.status&&(localStorage.removeItem("access_token"),c(!1),a(null),alert("logged out"),e.push("/"))})).catch((function(e){alert(e)}))},children:"Logout"})}function $(){var e=s.a.useContext(g),t=e.authState,c=(e.setAuthState,e.userState);e.setUserState;return Object(f.jsxs)(Q.a,{bg:"dark",variant:"dark",expand:"md",style:{padding:"5px"},children:[Object(f.jsx)(Q.a.Brand,{href:"/",children:"Forum"}),Object(f.jsx)(Q.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(f.jsxs)(Q.a.Collapse,{id:"responsive-navbar-nav",className:"justify-content-between",children:[Object(f.jsx)(Y.a,{className:"mr-auto"}),Object(f.jsx)(Y.a,{children:t&&null!=c?Object(f.jsxs)(X.a,{title:"my profile",id:"collasible-nav-dropdown",children:[Object(f.jsx)(X.a.Item,{children:Object(f.jsx)(v,{user:c.username})}),c.privilege>1?Object(f.jsxs)(a.Fragment,{children:[Object(f.jsx)(X.a.Item,{children:Object(f.jsx)(i.b,{to:"/admin/users",children:"Users"})}),Object(f.jsx)(X.a.Item,{children:Object(f.jsx)(i.b,{to:"/admin/topics",children:"Topics"})}),Object(f.jsx)(X.a.Item,{children:Object(f.jsx)(i.b,{to:"/admin/threads",children:"Threads"})})]}):"",Object(f.jsx)(Z,{})]}):Object(f.jsxs)(a.Fragment,{children:[Object(f.jsx)(Y.a.Link,{children:Object(f.jsx)(i.b,{to:"/login",children:"Login"})}),Object(f.jsx)(Y.a.Link,{children:Object(f.jsx)(i.b,{to:"/register",children:"Register"})})]})})]})]})}function ee(e){var t=Object(l.f)(),c=s.a.useContext(g),n=c.authState,r=(c.setAuthState,c.userState),j=(c.setUserState,Object(a.useRef)(1)),i=h("/user"),b=i.data,d=(i.error,i.isLoaded);return Object(a.useEffect)((function(){return j.current=1,(!n||null==r||r.privilege<=1)&&t.push("/"),function(){j.current=0}})),d?Object(f.jsx)(C.a,{children:Object(f.jsx)(x.a,{children:Object(f.jsx)(m.a,{children:Object(f.jsx)(x.a,{className:"justify-content-md-center",children:Object(f.jsxs)(m.a,{md:"8",children:[Object(f.jsx)("h1",{children:"Admin Users"}),Object(f.jsx)(O.a,{children:Object(f.jsx)(O.a.Body,{children:0==b.length?Object(f.jsx)("h4",{children:"This user hasn't made any posts yet..."}):Object(f.jsxs)(N.a,{variant:"flush",children:[Object(f.jsx)(N.a.Item,{children:Object(f.jsxs)(x.a,{children:[Object(f.jsx)(m.a,{sm:"3",children:Object(f.jsx)("b",{children:"Username"})}),Object(f.jsx)(m.a,{sm:"3",children:Object(f.jsx)("b",{children:"Name"})}),Object(f.jsx)(m.a,{sm:"3",children:Object(f.jsx)("b",{children:"Birthday"})}),Object(f.jsx)(m.a,{sm:"3",children:Object(f.jsx)("b",{children:"Gender"})})]})}),b.map((function(e){return Object(f.jsx)(N.a.Item,{children:Object(f.jsxs)(x.a,{children:[Object(f.jsx)(m.a,{sm:"3",children:Object(f.jsx)(v,{user:e.username})}),Object(f.jsx)(m.a,{sm:"3",children:e.name}),Object(f.jsx)(m.a,{sm:"3",children:e.gender}),Object(f.jsx)(m.a,{sm:"3",children:e.birthday})]})})}))]})})})]})})})})}):Object(f.jsx)(y.a,{animation:"border",role:"status",children:Object(f.jsx)("span",{className:"sr-only"})})}function te(e){var t=Object(l.f)(),c=s.a.useContext(g),n=c.authState,r=(c.setAuthState,c.userState),j=(c.setUserState,Object(a.useRef)(1)),b=h("/topic"),d=b.data,o=(b.error,b.isLoaded);return Object(a.useEffect)((function(){return j.current=1,(!n||null==r||r.privilege<=1)&&t.push("/"),function(){j.current=0}})),o?Object(f.jsx)(C.a,{children:Object(f.jsx)(x.a,{children:Object(f.jsx)(m.a,{children:Object(f.jsx)(x.a,{className:"justify-content-md-center",children:Object(f.jsxs)(m.a,{md:"8",children:[Object(f.jsx)("h1",{children:"Admin Topics"}),Object(f.jsx)(i.b,{to:"/admin/topics/create",children:Object(f.jsx)(p.a,{children:"Add"})}),Object(f.jsx)("br",{}),Object(f.jsx)(O.a,{children:Object(f.jsx)(O.a.Body,{children:0==d.length?Object(f.jsx)("h4",{children:"There are currently no topics"}):Object(f.jsxs)(N.a,{variant:"flush",children:[Object(f.jsx)(N.a.Item,{children:Object(f.jsxs)(x.a,{children:[Object(f.jsx)(m.a,{sm:"4",children:Object(f.jsx)("b",{children:"Name"})}),Object(f.jsx)(m.a,{sm:"4",children:Object(f.jsx)("b",{children:"Description"})}),Object(f.jsx)(m.a,{sm:"2",children:Object(f.jsx)("b",{children:"NSFW"})}),Object(f.jsx)(m.a,{sm:"1",children:Object(f.jsx)("b",{children:"Id"})}),Object(f.jsx)(m.a,{sm:"1"})]})}),d.map((function(e){return Object(f.jsx)(N.a.Item,{children:Object(f.jsxs)(x.a,{children:[Object(f.jsx)(m.a,{sm:"4",children:e.name}),Object(f.jsx)(m.a,{sm:"4",children:e.description}),Object(f.jsx)(m.a,{sm:"2",children:String(e.nsfw)}),Object(f.jsx)(m.a,{sm:"1",children:e.id}),Object(f.jsx)(m.a,{sm:"1",children:Object(f.jsx)(i.b,{to:"/admin/topics/edit/"+e.id,children:Object(f.jsx)(p.a,{children:"Edit"})})})]})})}))]})})})]})})})})}):Object(f.jsx)(y.a,{animation:"border",role:"status",children:Object(f.jsx)("span",{className:"sr-only"})})}function ce(){var e=Object(l.f)(),t=Object(a.useState)(""),c=Object(j.a)(t,2),n=c[0],r=c[1],i=Object(a.useState)(""),b=Object(j.a)(i,2),h=b[0],o=b[1],u=Object(a.useState)(!1),v=Object(j.a)(u,2),S=v[0],y=v[1],k=Object(a.useState)(!1),N=Object(j.a)(k,2),I=N[0],E=N[1],w=s.a.useContext(g),L=w.authState,A=(w.setAuthState,w.userState);w.setUserState;return Object(a.useEffect)((function(){(!L||null==A||A.privilege<=1)&&e.push("/")})),Object(f.jsx)(C.a,{children:Object(f.jsx)(x.a,{children:Object(f.jsx)(m.a,{children:Object(f.jsx)(x.a,{className:"justify-content-md-center",children:Object(f.jsxs)(m.a,{md:"8",children:[Object(f.jsx)("h1",{children:"Admin Create Topic"}),Object(f.jsx)(O.a,{children:Object(f.jsx)(O.a.Body,{children:Object(f.jsxs)(T.a,{onSubmit:function(t){return t.preventDefault(),void(""!=n&&""!=h&&0!=S?d.post("/topic",{name:n,description:h,nsfw:I}).then((function(t){201==t.status?alert("success"):alert("fail"),e.push("/admin/topics")})).catch((function(e){alert(e)})):alert("please do not leave any fields blank"))},children:[Object(f.jsxs)(T.a.Group,{children:[Object(f.jsx)(T.a.Label,{children:"Topic Name"}),Object(f.jsx)(T.a.Control,{value:n,onChange:function(e){return r(e.target.value)}})]}),Object(f.jsx)("br",{}),Object(f.jsxs)(T.a.Group,{children:[Object(f.jsx)(T.a.Label,{children:"Description"}),Object(f.jsx)(T.a.Control,{as:"textarea",rows:"9",value:h,onChange:function(e){return o(e.target.value)}})]}),Object(f.jsx)("br",{}),Object(f.jsx)(T.a.Check,{type:"checkbox",value:I,checked:I,onChange:function(e){return E(!I)},label:"NSFW"}),Object(f.jsx)("br",{}),Object(f.jsx)(T.a.Check,{type:"checkbox",value:S,checked:S,onChange:function(e){return y(!S)},label:"Confirm"}),Object(f.jsx)(p.a,{type:"submit",children:"Submit"})]})})})]})})})})})}function ae(e){var t=Object(l.g)().topicId,c=Object(l.f)(),n=Object(a.useState)(""),r=Object(j.a)(n,2),i=r[0],b=r[1],o=Object(a.useState)(""),u=Object(j.a)(o,2),v=u[0],S=u[1],k=Object(a.useState)(!1),N=Object(j.a)(k,2),I=N[0],E=N[1],w=Object(a.useState)(!1),L=Object(j.a)(w,2),A=L[0],B=L[1],D=s.a.useContext(g),R=D.authState,U=(D.setAuthState,D.userState),G=h("/topic/"+String(t)),P=G.data,F=(G.error,G.isLoaded),H=Object(a.useRef)(1);Object(a.useEffect)((function(){return H.current=1,(!R||null==U||U.privilege<=1)&&c.push("/"),function(){H.current=0}}));var _=function(){F&&H&&(P.user!=U.username&&U.privilege<=1&&c.push("/"),b(P.name),S(P.description),B(P.nsfw))};Object(a.useEffect)((function(){_()}),[F]);return F?Object(f.jsx)(C.a,{children:Object(f.jsx)(x.a,{children:Object(f.jsx)(m.a,{children:Object(f.jsx)(x.a,{className:"justify-content-md-center",children:Object(f.jsxs)(m.a,{md:"8",children:[Object(f.jsxs)("h1",{children:["Edit Topic ",P.id]}),Object(f.jsx)(O.a,{children:Object(f.jsxs)(O.a.Body,{children:[Object(f.jsxs)(T.a,{onSubmit:function(e){return e.preventDefault(),void(""!=i&&""!=v&&0!=I?d.put("/topic/"+P.id,{name:i,description:v,nsfw:A}).then((function(e){201==e.status?alert("success"):alert("fail"),c.push("/")})).catch((function(e){alert(e)})):alert("please do not leave any fields blank"))},children:[Object(f.jsxs)(T.a.Group,{children:[Object(f.jsx)(T.a.Label,{children:"Topic Name"}),Object(f.jsx)(T.a.Control,{value:i,onChange:function(e){return b(e.target.value)}})]}),Object(f.jsx)("br",{}),Object(f.jsxs)(T.a.Group,{children:[Object(f.jsx)(T.a.Label,{children:"Description"}),Object(f.jsx)(T.a.Control,{as:"textarea",rows:"9",value:v,onChange:function(e){return S(e.target.value)}})]}),Object(f.jsx)("br",{}),Object(f.jsx)(T.a.Check,{type:"checkbox",value:A,checked:A,onChange:function(e){return B(!A)},label:"NSFW"}),Object(f.jsx)("br",{}),Object(f.jsx)(T.a.Check,{type:"checkbox",value:I,checked:I,onChange:function(e){return E(!I)},label:"Confirm"}),Object(f.jsx)(p.a,{type:"submit",children:"Submit"})]}),Object(f.jsx)(p.a,{variant:"warning",onClick:_,children:"Reset"}),Object(f.jsx)(p.a,{variant:"danger",onClick:function(){d.delete("/topic/"+P.id).then((function(e){200==e.status?alert("success"):alert("fail"),c.push("/admin/topics")})).catch((function(e){alert(e)}))},children:"Delete"})]})})]})})})})}):Object(f.jsx)(y.a,{animation:"border",role:"status",children:Object(f.jsx)("span",{className:"sr-only"})})}function se(e){var t=Object(l.f)(),c=s.a.useContext(g),n=c.authState,r=(c.setAuthState,c.userState),j=(c.setUserState,Object(a.useRef)(1)),b=h("/thread"),d=b.data,o=(b.error,b.isLoaded);return Object(a.useEffect)((function(){return j.current=1,(!n||null==r||r.privilege<=1)&&t.push("/"),function(){j.current=0}})),o?Object(f.jsx)(C.a,{children:Object(f.jsx)(x.a,{children:Object(f.jsx)(m.a,{children:Object(f.jsx)(x.a,{className:"justify-content-md-center",children:Object(f.jsxs)(m.a,{md:"8",children:[Object(f.jsx)("h1",{children:"Admin Threads"}),Object(f.jsx)("br",{}),Object(f.jsx)(O.a,{children:Object(f.jsx)(O.a.Body,{children:0==d.length?Object(f.jsx)("h4",{children:"There are currently no topics"}):Object(f.jsxs)(N.a,{variant:"flush",children:[Object(f.jsx)(N.a.Item,{children:Object(f.jsxs)(x.a,{children:[Object(f.jsx)(m.a,{sm:"6",children:Object(f.jsx)("b",{children:"Name"})}),Object(f.jsx)(m.a,{sm:"1",children:Object(f.jsx)("b",{children:"Id"})}),Object(f.jsx)(m.a,{sm:"2",children:Object(f.jsx)("b",{children:"Date"})}),Object(f.jsx)(m.a,{sm:"2",children:Object(f.jsx)("b",{children:"Author"})}),Object(f.jsx)(m.a,{sm:"1"})]})}),d.map((function(e){return Object(f.jsxs)(N.a.Item,{children:[console.log(e),Object(f.jsxs)(x.a,{children:[Object(f.jsx)(m.a,{sm:"6",children:e.name}),Object(f.jsx)(m.a,{sm:"1",children:e.id}),Object(f.jsx)(m.a,{sm:"2",children:e.created_date}),Object(f.jsx)(m.a,{sm:"2",children:e.user}),Object(f.jsx)(m.a,{sm:"1",children:Object(f.jsx)(i.b,{to:"/topic/"+e.topic+"/thread/"+e.id+"/edit",children:Object(f.jsx)(p.a,{children:"Edit"})})})]})]})}))]})})})]})})})})}):Object(f.jsx)(y.a,{animation:"border",role:"status",children:Object(f.jsx)("span",{className:"sr-only"})})}function ne(e){var t=h("/auth/verify/"+Object(l.g)().challenge),c=(t.data,t.error),a=t.isLoaded;return null!==c?Object(f.jsxs)("div",{children:["Verification failed: ",c.message]}):a?Object(f.jsx)(C.a,{children:Object(f.jsx)(x.a,{children:Object(f.jsx)(m.a,{children:Object(f.jsx)(x.a,{className:"justify-content-md-center",children:Object(f.jsxs)(m.a,{md:"8",children:[Object(f.jsx)("h1",{children:"Success"}),Object(f.jsx)(O.a,{children:Object(f.jsx)(O.a.Body,{children:"Your email has been sucesfully verified, you may log in"})})]})})})})}):Object(f.jsx)(y.a,{animation:"border",role:"status",children:Object(f.jsx)("span",{className:"sr-only"})})}function re(){return Object(f.jsx)(C.a,{children:Object(f.jsx)(x.a,{children:Object(f.jsx)(m.a,{children:Object(f.jsx)(x.a,{className:"justify-content-md-center",children:Object(f.jsxs)(m.a,{md:"8",children:[Object(f.jsx)("h1",{children:"Verification Required"}),Object(f.jsx)(O.a,{children:Object(f.jsx)(O.a.Body,{children:"A verification link has been sent to the email you signed up with, check your inbox."})})]})})})})})}function je(){var e=Object(l.f)(),t=Object(a.useState)(""),c=Object(j.a)(t,2),s=c[0],n=c[1],r=Object(a.useState)(!1),i=Object(j.a)(r,2),b=i[0],h=i[1],o=Object(a.useState)(!1),u=Object(j.a)(o,2),v=u[0],g=u[1];return b?Object(f.jsx)(C.a,{children:Object(f.jsx)(x.a,{children:Object(f.jsx)(m.a,{children:Object(f.jsx)(x.a,{className:"justify-content-md-center",children:Object(f.jsxs)(m.a,{md:"8",children:[Object(f.jsx)("h1",{children:"Reset Request Sent"}),Object(f.jsx)(O.a,{children:Object(f.jsx)(O.a.Body,{children:"A password reset link has been sent to the email you signed up with, check your inbox."})})]})})})})}):Object(f.jsx)(C.a,{children:Object(f.jsx)(x.a,{children:Object(f.jsx)(m.a,{children:Object(f.jsx)(x.a,{className:"justify-content-md-center",children:Object(f.jsxs)(m.a,{md:"8",children:[Object(f.jsx)("h1",{children:"Forgot Password"}),Object(f.jsx)(O.a,{children:Object(f.jsx)(O.a.Body,{children:Object(f.jsxs)(T.a,{onSubmit:function(t){return t.preventDefault(),void(""!=s?(d.post("/auth/requestreset",{email:s}).then((function(e){200==e.status?h(!0):alert(e),g(!1)})).catch((function(t){401==t.response.status?e.push("/verify/instructions"):alert(t),g(!1)})),g(!0)):alert("please do not leave any fields blank"))},children:[Object(f.jsxs)(T.a.Group,{children:[Object(f.jsx)(T.a.Label,{children:"Enter your email"}),Object(f.jsx)(T.a.Control,{type:"email",value:s,onChange:function(e){return n(e.target.value)}})]}),Object(f.jsx)("br",{}),v?Object(f.jsx)(y.a,{animation:"border",role:"status"}):Object(f.jsx)(p.a,{type:"submit",children:"Submit"})]})})})]})})})})})}function ie(e){var t=Object(l.g)().challenge,c=Object(a.useState)(""),s=Object(j.a)(c,2),n=s[0],r=s[1],i=Object(a.useState)(""),b=Object(j.a)(i,2),h=b[0],o=b[1],u=Object(a.useState)(!1),v=Object(j.a)(u,2),g=v[0],S=v[1],k=Object(a.useState)(!1),N=Object(j.a)(k,2),I=N[0],E=N[1];return g?Object(f.jsx)(C.a,{children:Object(f.jsx)(x.a,{children:Object(f.jsx)(m.a,{children:Object(f.jsx)(x.a,{className:"justify-content-md-center",children:Object(f.jsxs)(m.a,{md:"8",children:[Object(f.jsx)("h1",{children:"Reset Succeeded"}),Object(f.jsx)(O.a,{children:Object(f.jsx)(O.a.Body,{children:"Your Password has been changed, you may now log in."})})]})})})})}):Object(f.jsx)(C.a,{children:Object(f.jsx)(x.a,{children:Object(f.jsx)(m.a,{children:Object(f.jsx)(x.a,{className:"justify-content-md-center",children:Object(f.jsxs)(m.a,{md:"8",children:[Object(f.jsx)("h1",{children:"Reset Password"}),Object(f.jsx)(O.a,{children:Object(f.jsx)(O.a.Body,{children:Object(f.jsxs)(T.a,{onSubmit:function(e){return e.preventDefault(),void(""!=n&&n==h?(d.post("/auth/reset/"+t,{password:n}).then((function(e){200==e.status?S(!0):alert(e),E(!1)})).catch((function(e){alert(e),E(!1)})),E(!0)):alert("please do not leave any fields blank"))},children:[Object(f.jsxs)(T.a.Group,{children:[Object(f.jsx)(T.a.Label,{children:"Password"}),Object(f.jsx)(T.a.Control,{type:"password",value:n,onChange:function(e){return r(e.target.value)}})]}),Object(f.jsx)("br",{}),Object(f.jsxs)(T.a.Group,{children:[Object(f.jsx)(T.a.Label,{children:"Confirm Password"}),Object(f.jsx)(T.a.Control,{type:"password",value:h,onChange:function(e){return o(e.target.value)}})]}),Object(f.jsx)("br",{}),I?Object(f.jsx)(y.a,{animation:"border",role:"status"}):Object(f.jsx)(p.a,{type:"submit",children:"Submit"})]})})})]})})})})})}function le(){var e=Object(a.useState)(!1),t=Object(j.a)(e,2),c=t[0],s=t[1],n=Object(a.useState)(null),r=Object(j.a)(n,2),b=r[0],h=r[1];return function(e,t,c,s){var n=Object(a.useState)(null),r=Object(j.a)(n,2),i=r[0],l=r[1];Object(a.useEffect)((function(){null===localStorage.getItem("access_token")||1==e&&null!=c||d.get("/auth/user").then((function(e){200==e.status&&(t(!0),s(e.data),console.log(e.data))})).catch((function(e){l(e)}))}),[e,c])}(c,s,b,h),Object(f.jsx)(g.Provider,{value:{authState:c,setAuthState:s,userState:b,setUserState:h},children:Object(f.jsxs)(i.a,{basename:"/",children:[Object(f.jsx)($,{}),Object(f.jsx)("div",{children:Object(f.jsxs)(l.c,{children:[Object(f.jsx)(l.a,{exact:!0,path:"/",children:Object(f.jsx)(E,{})}),Object(f.jsx)(l.a,{path:"/topic/:topicId/thread/:threadId/post/:postId/edit",children:Object(f.jsx)(F,{})}),Object(f.jsx)(l.a,{path:"/topic/:topicId/thread/:threadId/post/create",children:Object(f.jsx)(U,{})}),Object(f.jsx)(l.a,{path:"/topic/:topicId/thread/:threadId/edit",children:Object(f.jsx)(D,{})}),Object(f.jsx)(l.a,{path:"/topic/:topicId/thread/create",children:Object(f.jsx)(B,{})}),Object(f.jsx)(l.a,{path:"/topic/:topicId/thread/:threadId",children:Object(f.jsx)(R,{})}),Object(f.jsx)(l.a,{path:"/topic/:topicId",children:Object(f.jsx)(A,{})}),Object(f.jsx)(l.a,{path:"/reset/:challenge",children:Object(f.jsx)(ie,{})}),Object(f.jsx)(l.a,{path:"/verify/instructions",children:Object(f.jsx)(re,{})}),Object(f.jsx)(l.a,{path:"/verify/confirm/:challenge",children:Object(f.jsx)(ne,{})}),Object(f.jsx)(l.a,{path:"/admin",children:Object(f.jsx)(he,{})}),Object(f.jsx)(l.a,{path:"/post",children:Object(f.jsx)(be,{})}),Object(f.jsx)(l.a,{path:"/user",children:Object(f.jsx)(de,{})}),Object(f.jsx)(l.a,{path:"/create",children:Object(f.jsx)(U,{})}),Object(f.jsx)(l.a,{path:"/register",children:Object(f.jsx)(_,{})}),Object(f.jsx)(l.a,{path:"/login",children:Object(f.jsx)(H,{})}),Object(f.jsx)(l.a,{path:"/forgotpassword",children:Object(f.jsx)(je,{})})]})})]})})}function be(){var e=Object(l.h)();Object(l.g)().id;return Object(f.jsxs)(l.c,{children:[Object(f.jsx)(l.a,{path:"".concat(e.path,"/:postId/edit"),children:Object(f.jsx)(F,{})}),Object(f.jsx)(l.a,{path:"".concat(e.path,"/:postId"),children:Object(f.jsx)(G,{})}),Object(f.jsx)(l.a,{path:e.path})]})}function de(){var e=Object(l.h)();return Object(f.jsxs)(l.c,{children:[Object(f.jsx)(l.a,{path:"".concat(e.path,"/:userName/edit"),children:Object(f.jsx)(K,{})}),Object(f.jsx)(l.a,{path:"".concat(e.path,"/:userName"),children:Object(f.jsx)(W,{})}),Object(f.jsx)(l.a,{path:e.path,children:"g"})]})}function he(){var e=Object(l.h)();return Object(f.jsxs)(l.c,{children:[Object(f.jsx)(l.a,{path:"".concat(e.path,"/users"),children:Object(f.jsx)(ee,{})}),Object(f.jsx)(l.a,{path:"".concat(e.path,"/topics/create"),children:Object(f.jsx)(ce,{})}),Object(f.jsx)(l.a,{path:"".concat(e.path,"/topics/edit/:topicId"),children:Object(f.jsx)(ae,{})}),Object(f.jsx)(l.a,{path:"".concat(e.path,"/topics"),children:Object(f.jsx)(te,{})}),Object(f.jsx)(l.a,{path:"".concat(e.path,"/threads"),children:Object(f.jsx)(se,{})}),Object(f.jsx)(l.a,{path:e.path,children:"g"})]})}c(265),c(266);r.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(le,{})}),document.getElementById("root"))}},[[288,1,2]]]);
//# sourceMappingURL=main.f784595c.chunk.js.map